"use strict";var _createClass=function(){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wgt=null,wgtCurrentScript=document.currentScript;document.addEventListener("DOMContentLoaded",function(){wgt=function(t,o){var e=t,i=o,n=i.querySelector("head"),a=i.querySelector("a[data-wgt-do]"),r=a.parentNode,s=a.getAttribute("data-wgt-key"),l=a.getAttribute("data-wgt-quantity"),c=wgtCurrentScript.src.split("/"),d=c[0]+"//"+c[2],g={},u=l,m=0,w=!1,v=r.offsetWidth,p=null,f=null,h=null,y=null,_=null,T=null,L=null,M=0,W=null,H=null;function S(){_classCallCheck(this,S),this._baseUrl="https://api.dev.vouch4.me/v1/widget"}g.settings={pathToStyle:d+"/css/wgt.min.css",pathToMasonry:"https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.js",pathToGoogleMap:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBNt2FsPs3u7nkz3iE4tvMnXw5mcQGjsjg"};var b=new(_createClass(S,[{key:"getResource",value:function(t){return fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return t.json()})}},{key:"getData",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:20,a=1<arguments.length&&void 0!==e?e:0,i=this._baseUrl+"/"+s+"?limit="+n+"&offset="+a;return this.getResource(i)}}]),S),C={addAsyncValToVariables:function(){p=i.querySelector(".wgt"),f=i.querySelector(".container-multi-wgt-in-row"),i.querySelector(".container-multi-wgt-in-row .wgt-item"),h=i.querySelector(".wgt-popup"),i.querySelector(".wgt-btn-popup-open"),i.querySelector(".wgt-close-modal"),y=i.querySelector(".wgt-overlay"),_=i.querySelector(".wgt-add-more-btn")},getItemsData:function(t,e,n){var a=1<arguments.length&&void 0!==e?e:20,i=2<arguments.length&&void 0!==n?n:0;b.getData(a,i).then(function(t){T=t.data,M+=i,m=Number(u),H=!(t.data.length<a)}).then(function(){t()})},getNewItemsData:function(t,e,n){var a=1<arguments.length&&void 0!==e?e:20,i=2<arguments.length&&void 0!==n?n:0;b.getData(a,i).then(function(t){L=t.data,T=[].concat(_toConsumableArray(T),_toConsumableArray(t.data)),M+=Number(a),m+=Number(u),t.data.length<a&&_.classList.add("hide")}).then(function(){t()})},isSmallContainerWidth:function(){return v<=576},createStyle:function(t,e){var n=o.createElement("link");return n.rel="stylesheet",n.href=t,n.onload=function(){e()},n},createScript:function(t,e){var n=o.createElement("script");return n.src=t,n.type="text/javascript",n.onload=function(){e()},n},appendTagToHead:function(t){n.appendChild(t)},handleLayout:function(t){var e=i.createElement("div");e.innerHTML=e.innerHTML+=C.HTMLWgtLayout(),a.replaceWith(e);var n=e.querySelectorAll(".wgt-item-header__img");C.onImagesLoaded(n,t)},onImagesLoaded:function(t,e){var n=t.length,a=0;function i(){++a===n&&e()}[].forEach.call(t,function(t){t.addEventListener("load",i,!1)})},addItemsToLayout:function(t){var e=i.createElement("div");e.innerHTML=e.innerHTML+=C.HTMLWgtItem(t),f.appendChild(e);var n=C.setMsnryColumnWidth(v);C.setClassToWgtItems(n),W.appended(e);var a=e.querySelectorAll(".wgt-item-header__img");C.onImagesLoaded(a,function(){W.layout()})},handleLayoutPopupLayout:function(t){h.innerHTML=C.HTMLWgtPopup(t),T[t].content._geoloc&&C.initGoogleMapInPopup(T[t].content._geoloc[0])},initGoogleMapInPopup:function(t){var e=o.querySelector(".wgt-map"),n=t,a={lat:Number(n.lat),lng:Number(n.lng)},i=new google.maps.Map(e,{center:a,zoom:8});new google.maps.Marker({position:a,map:i})},HTMLWgtLayout:function(){return'\n\t\t\t\t\t<div class="wgt">\n\t\t\t\t\t\t'+C.HTMLWgtHeaderForMobile()+'\n\t\t\t\t\t\t<div class="container-multi-wgt-in-row">\t\t\t\t\t\n\t\t\t\t\t\t\t'+C.HTMLWgtHelpersItemsClassElems()+"\n\t\t\t\t\t\t\t"+C.HTMLWgtGuttersSizer()+"\n\n\t\t\t\t\t\t\t"+C.HTMLWgtItem(T)+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"+C.HTMLWgtAddMoreItemsBtn()+"\n\t\t\t\t\t\t"+C.HTMLWgtOverlay()+'\n\t\t\t\t\t\t<div class="wgt-popup">\n\t\t\t\t\t\t\t'+C.HTMLWgtPopup(0)+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"},HTMLWgtHelpersItemsClassElems:function(){return'\n\t\t\t\t\t<div class="wgt-item--one-in-row"></div>\n\t\t\t\t\t<div class="wgt-item--two-in-row"></div>\n\t\t\t\t\t<div class="wgt-item--three-in-row"></div>\n\t\t\t\t\t<div class="wgt-item--four-in-row"></div>\n\t\t\t\t'},HTMLWgtGuttersSizer:function(){return'\n\t\t\t\t\t<div class="wgt-item--one-in-row-gutter"></div>\n\t\t\t\t\t<div class="wgt-item--two-in-row-gutter"></div>\n\t\t\t\t\t<div class="wgt-item--three-in-row-gutter"></div>\n\t\t\t\t\t<div class="wgt-item--four-in-row-gutter"></div>\n\t\t\t\t'},HTMLWgtHeaderForMobile:function(){var t="";return 576<v&&(t="wgt--mobile"),'\n\t\t\t\t\t<header class="wgt-header wgt-header--one-in-row '+t+'">\n\t\t\t\t\t\t<a class="wgt-header__link" href="#">\n\t\t\t\t\t\t\t<img class="wgt-header__img" src="'+d+'/img/vouch-icon.jpg" alt="">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="wgt-header__text">\n\t\t\t\t\t\t\t<div class="wgt-header__title">Vouch</div>\n\t\t\t\t\t\t\t<div class="wgt-header__subtitle">Official reviews</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</header>\t\n\t\t\t\t'},HTMLWgtItem:function(t){return t.map(function(t,e){var n=t.content,a=t.linkeeProfile,i=t.linkerProfile,o=t.humanTime,r=a.firstName+" "+a.lastName,s=i.firstName+" "+i.lastName;return'\n\t\t\t\t\t\t<div class="wgt-item" data-id='+(e+M)+'>\n\t\t\t\t\t\t\t<header class="wgt-item-header">\n\t\t\t\t\t\t\t\t<img src="'+n.coverPic+'" alt="" class="wgt-item-header__img">\n\t\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t\t<img src="'+a.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+r+'</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="wgt-item-header__descr">'+n.title+'</div>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\n\t\t\t\t\t\t\t<footer class="wgt-item-footer">\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__descr">\n\t\t\t\t\t\t\t\t\t'+n.questions[5].answer+'\n\t\t\t\t\t\t\t\t</div>   \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__time-wrap">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-footer__by">Vouched by:</div>\n\t\t\t\t\t\t\t\t\t<time class="wgt-item-footer__time">'+o+'</time>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__rating">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t\t\t<img src="'+i.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t\t\t<div class="wget-rating-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+s+'</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="wget-rating">\n\t\t\t\t\t\t\t\t\t\t\t\t'+C.HTMLWgtStars(n.questions[6].answer)+'\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</footer>\n\t\t\t\t\n\t\t\t\t\t\t\t<button class="wgt-btn-popup-open"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'}).join("")},HTMLWgtStars:function(t){for(var e="",n=0;n<t;n++)e+='<span class="wget-rating__item">&starf;</span>';return e},HTMLWgtAddMoreItemsBtn:function(){return H?'<button class="wgt-add-more-btn">Show more</button>':'<button class="wgt-add-more-btn hide">Show more</button>'},HTMLWgtOverlay:function(){return'<div class="wgt-overlay"></div>'},HTMLWgtQuestionPoint:function(t){return t.map(function(t){if("Any extra comments"!==t.text&&"rating"!==t.text&&""!==t.answer)return'\n\t\t\t\t\t\t<div class="wgt-point">\n\t\t\t\t\t\t\t<div class="wgt-point__text">'+t.text+'</div>\n\t\t\t\t\t\t\t<div class="wgt-point__label">'+t.answer+"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"}).join("")},HTMLWgtPopupTags:function(t){return t.tags?'\n\t\t\t\t<div class="wgt-tags">\n\t\t\t\t\t<div class="wgt-title">Tags</div>\n\t\t\t\t\t<div class="wgt-tags-wrapper">\n\t\t\t\t\t\t'+C.HTMLWgtTag(t.tags)+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>   \n\t\t\t\t":""},HTMLWgtTag:function(t){return t.map(function(t){return'<div class="wgt-tag">'+t+"</div>"}).join("")},HTMLWgtLocation:function(t){return t._geoloc?'\n\t\t\t\t\t<div class="wgt-location">\n\t\t\t\t\t\t<div class="wgt-title">Location</div>\n\t\t\t\t\t\t<div class="wgt-map"></div>\n\t\t\t\t\t</div>\n\t\t\t\t':""},HTMLWgtPopup:function(t){var e=T[t],n=e.content,a=e.linkeeProfile,i=e.linkerProfile,o=a.firstName+" "+a.lastName,r=i.firstName+" "+i.lastName;return'\n\t\t\t\t\t<div class="wgt-modal">\n\t\t\t\t\t\t<header class="wgt-item-header">\n\t\t\t\t\t\t\t<img src="'+n.coverPic+'" alt="" class="wgt-item-header__img">\n\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t<img src="'+a.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+o+'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="wgt-item-header__descr">'+n.title+'</div>\n\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<article class="wgt-article">\n\t\t\t\t\t\t\t<header class="wgt-article-header">\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__rating">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t\t\t<img src="'+i.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t\t\t<div class="wget-rating-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+r+'</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="wget-rating">\n\t\t\t\t\t\t\t\t\t\t\t\t'+C.HTMLWgtStars(n.questions[6].answer)+'\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</header>\n\t\t\t\n\t\t\t\t\t\t\t<div class="wgt-article-text">\n\t\t\t\t\t\t\t\t<div class="wgt-article__descr">\n\t\t\t\t\t\t\t\t\t'+n.questions[5].answer+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t\t\t"+C.HTMLWgtQuestionPoint(n.questions)+"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t"+C.HTMLWgtLocation(n)+"          \n\t\t\t\t\t\t\t"+C.HTMLWgtPopupTags(n)+'          \n\t\t\t\t\t\t</article>\n\t\t\t\n\t\t\t\t\t\t<button class="wgt-close-modal">\n\t\t\t\t\t\t\t<span class="wgt-close-modal__text">Back</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t'},setMsnryColumnWidth:function(t){return t<576?"wgt-item--one-in-row":t<768?"wgt-item--two-in-row":t<992?"wgt-item--three-in-row":"wgt-item--four-in-row"},setMsnryGutterWidth:function(t){return t<576?".wgt-item--one-in-row-gutter":t<768?".wgt-item--two-in-row-gutter":t<992?".wgt-item--three-in-row-gutter":".wgt-item--four-in-row-gutter"},setClassToWgtItems:function(t){for(var e=i.querySelectorAll(".wgt-item:not(.wgt-item--one-in-row):not(.wgt-item--two-in-row):not(.wgt-item--three-in-row):not(.wgt-item--four-in-row)"),n=0;n<e.length;n++)e[n].classList.add(t)},updateClassToWgtItems:function(t){for(var e=i.querySelectorAll(".wgt-item"),n=0;n<e.length;n++)e[n].className="wgt-item",e[n].classList.add(t)},initMasonry:function(){var t=C.setMsnryColumnWidth(v),e=C.setMsnryGutterWidth(v);C.setClassToWgtItems(t),W=new Masonry(f,{itemSelector:".wgt-item",columnWidth:"."+t,percentPosition:!0,gutter:e})},updateMasonry:function(){var t=C.setMsnryColumnWidth(v),e=C.setMsnryGutterWidth(v);C.updateClassToWgtItems(t),W.destroy(),W=new Masonry(f,{itemSelector:".wgt-item",columnWidth:"."+t,percentPosition:!0,gutter:e})},addStyleToHead:function(t){C.appendTagToHead(C.createStyle(g.settings.pathToStyle,t))},addScriptToHead:function(t){C.appendTagToHead(C.createScript(g.settings.pathToMasonry,t))},addGoogleMapsScriptToHead:function(t){C.appendTagToHead(C.createScript(g.settings.pathToGoogleMap,t))},togglePopup:function(){h.classList.toggle("open"),y.classList.toggle("open")},closePopup:function(){h.classList.remove("open"),y.classList.remove("open")},onPopupBtnClick:function(){p.addEventListener("click",function(t){var e=t.target;if(e.classList.contains("wgt-btn-popup-open")){var n=e.closest(".wgt-item").getAttribute("data-id");C.handleLayoutPopupLayout(n),C.togglePopup()}})},onPopupCloseBtnClick:function(){p.addEventListener("click",function(t){var e=t.target;e.classList.contains("wgt-close-modal")&&C.closePopup(),e.closest(".wgt-close-modal")&&C.closePopup()})},onPopupOverlayClick:function(){y.addEventListener("click",function(){C.closePopup()})},onAddMoreItemsBtnClick:function(t){_.addEventListener("click",function(){C.getNewItemsData(t,u,m)})},onWindowresize:function(){e.addEventListener("resize",function(){v=r.offsetWidth,w||(C.updateMasonry(),w=!0,setTimeout(function(){w=!1},500))})},domReady:function(){C.addAsyncValToVariables(),C.initMasonry(),C.onPopupBtnClick(),C.onPopupCloseBtnClick(),C.onPopupOverlayClick(),C.onAddMoreItemsBtnClick(function(){C.addItemsToLayout(L)}),C.onWindowresize()}};return C.addStyleToHead(function(){C.addScriptToHead(function(){C.addGoogleMapsScriptToHead(function(){C.getItemsData(function(){C.handleLayout(C.domReady)},u,m)})})}),C}(window,document)});