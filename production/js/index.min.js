"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wgt=null,wgtCurrentScript=document.currentScript;document.addEventListener("DOMContentLoaded",function(){wgt=function(t,o){var e=t,a=o,n=(a.querySelector("html"),a.querySelector("head")),i=a.querySelector("body"),r=a.querySelector("a[data-wgt-do]"),s=r.parentNode,l=r.getAttribute("data-wgt-key"),c=r.getAttribute("data-wgt-quantity"),d=r.getAttribute("data-wgt-hide-logo"),g=r.getAttribute("data-wgt-hide-border"),u=wgtCurrentScript.src.split("/"),v=u[0]+"//"+u[2],m={},p=c,w=0,f=!1,h=s.offsetWidth,y=null,T=null,_=null,L=null,M=null,H=null,W=null,S=null,b=0,C=null,P=null,k=null;function A(){_classCallCheck(this,A),this._baseUrl="https://api.vouch4.me/v1/widget"}m.settings={pathToStyle:v+"/css/wgt.min.css",pathToMasonry:"https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.js",pathToGoogleMap:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBNt2FsPs3u7nkz3iE4tvMnXw5mcQGjsjg"};var I=new(_createClass(A,[{key:"getResource",value:function(t){return fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return t.json()})}},{key:"getData",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:20,i=1<arguments.length&&void 0!==e?e:0,a=this._baseUrl+"/"+l+"?limit="+n+"&offset="+i;return this.getResource(a)}}]),A),q={addAsyncValToVariables:function(){y=a.querySelector(".wgt"),T=a.querySelector(".container-multi-wgt-in-row"),a.querySelector(".container-multi-wgt-in-row .wgt-item"),_=a.querySelector(".wgt-popup"),a.querySelector(".wgt-btn-popup-open"),L=a.querySelector(".wgt-close-modal"),M=a.querySelector(".wgt-overlay"),H=a.querySelector(".wgt-add-more-btn"),k=a.querySelector(".spinner")},getItemsData:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:20,a=2<arguments.length&&void 0!==n?n:0;I.getData(i,a).then(function(t){W=t.data,b+=a,w=Number(p),P=!(t.data.length<i)}).then(function(){t()})},getNewItemsData:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:20,a=2<arguments.length&&void 0!==n?n:0;I.getData(i,a).then(function(t){S=t.data,W=[].concat(_toConsumableArray(W),_toConsumableArray(t.data)),b+=Number(i),w+=Number(p),t.data.length<i&&H.classList.add("hide")}).then(function(){t()})},isSmallContainerWidth:function(){return h<=576},createStyle:function(t,e){var n=o.createElement("link");return n.rel="stylesheet",n.href=t,n.onload=function(){e()},n},createScript:function(t,e){var n=o.createElement("script");return n.src=t,n.type="text/javascript",n.onload=function(){e()},n},appendTagToHead:function(t){n.appendChild(t)},handleLayout:function(t){var e=a.createElement("div");e.innerHTML=e.innerHTML+=q.HTMLWgtLayout(),r.replaceWith(e);var n=e.querySelectorAll(".wgt-item-header__img");q.onImagesLoaded(n,t)},onImagesLoaded:function(t,e){var n=t.length,i=0;function a(){++i===n&&e()}[].forEach.call(t,function(t){t.addEventListener("load",a,!1)})},addItemsToLayout:function(t){var e=a.createElement("div");e.innerHTML=e.innerHTML+=q.HTMLWgtItem(t),T.appendChild(e);var n=q.setMsnryColumnWidth(h);q.setClassToWgtItems(n),C.appended(e);var i=e.querySelectorAll(".wgt-item-header__img");q.onImagesLoaded(i,function(){C.layout()})},handleLayoutPopupLayout:function(t){_.innerHTML=q.HTMLWgtPopup(t),W[t].content._geoloc&&q.initGoogleMapInPopup(W[t].content._geoloc[0])},initGoogleMapInPopup:function(t){var e=o.querySelector(".wgt-map"),n=t,i={lat:Number(n.lat),lng:Number(n.lng)},a=new google.maps.Map(e,{center:i,zoom:8});new google.maps.Marker({position:i,map:a})},setAnswer:function(t){var e=t.questions.filter(function(t){if(t.text.includes("comment"))return t});return e[0]?e[0].answer:""},setRating:function(t){var e=t.questions.filter(function(t){if(t.text.includes("rating"))return t});return e[0]?e[0].answer:""},HTMLWgtLayout:function(){var t="";return"true"!==g&&(t+="wgt--border"),'\n\t\t\t\t\t<div class="wgt '+t+'">\n\t\t\t\t\t\t'+q.HTMLWgtHeader()+'\n\t\t\t\t\t\t<div class="container-multi-wgt-in-row">\t\t\t\t\t\n\t\t\t\t\t\t\t'+q.HTMLWgtHelpersItemsClassElems()+"\n\t\t\t\t\t\t\t"+q.HTMLWgtGuttersSizer()+"\n\n\t\t\t\t\t\t\t"+q.HTMLWgtItem(W)+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"+q.HTMLWgtAddMoreItemsBtn()+"\n\t\t\t\t\t\t"+q.HTMLWgtOverlay()+'\n\t\t\t\t\t\t<div class="wgt-popup">\n\t\t\t\t\t\t\t'+q.HTMLWgtPopup(0)+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"+q.HTMLWgtCloseModal()+"\n\t\t\t\t\t</div>\n\t\t\t\t"},HTMLWgtSpinner:function(){return'\n\t\t\t\t\t<div class="wgt-spinner-wrapper">\n\t\t\t\t\t\t<img src="'+v+'/img/spinner.svg" alt="" class="wgt-spinner">\n\t\t\t\t\t</div>\n\t\t\t\t'},HTMLWgtHelpersItemsClassElems:function(){return'\n\t\t\t\t\t<div class="wgt-item--one-in-row"></div>\n\t\t\t\t\t<div class="wgt-item--two-in-row"></div>\n\t\t\t\t\t<div class="wgt-item--three-in-row"></div>\n\t\t\t\t\t<div class="wgt-item--four-in-row"></div>\n\t\t\t\t'},HTMLWgtGuttersSizer:function(){return'\n\t\t\t\t\t<div class="wgt-item--one-in-row-gutter"></div>\n\t\t\t\t\t<div class="wgt-item--two-in-row-gutter"></div>\n\t\t\t\t\t<div class="wgt-item--three-in-row-gutter"></div>\n\t\t\t\t\t<div class="wgt-item--four-in-row-gutter"></div>\n\t\t\t\t'},HTMLWgtHeader:function(){return"true"===d?"":'\n\t\t\t\t\t<div class="wgt-header wgt-header--one-in-row">\n\t\t\t\t\t\t<a class="wgt-header__link" href="https://vouch4.me">\n\t\t\t\t\t\t\t<img class="wgt-header__img" src="'+v+'/img/vouch-icon.jpg" alt="">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="wgt-header__text">\n\t\t\t\t\t\t\t<div class="wgt-header__title">Vouch</div>\n\t\t\t\t\t\t\t<div class="wgt-header__subtitle">Official reviews</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t'},HTMLWgtItem:function(t){return t.map(function(t,e){var n=t.content,i=t.linkeeProfile,a=t.linkerProfile,o=t.humanTime,r=i.firstName+" "+i.lastName,s=a.firstName+" "+a.lastName,l=q.setAnswer(n),c=q.setRating(n);return'\n\t\t\t\t\t\t<div class="wgt-item" data-id='+(e+b)+'>\n\t\t\t\t\t\t\t<div class="wgt-item-header">\n\t\t\t\t\t\t\t\t<img src="'+n.coverPic+'" alt="" class="wgt-item-header__img">\n\t\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t\t<img src="'+i.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+r+'</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="wgt-item-header__descr">'+n.title+'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\t\t<div class="wgt-item-footer">\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__descr">\n\t\t\t\t\t\t\t\t\t'+l+'\n\t\t\t\t\t\t\t\t</div>   \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__time-wrap">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-footer__by">Vouched by:</div>\n\t\t\t\t\t\t\t\t\t<time class="wgt-item-footer__time">'+o+'</time>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__rating">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t\t\t<img src="'+a.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t\t\t<div class="wget-rating-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+s+'</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="wget-rating">\n\t\t\t\t\t\t\t\t\t\t\t\t'+q.HTMLWgtStars(c)+'\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\t\t<button class="wgt-btn-popup-open"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'}).join("")},HTMLWgtStars:function(t){for(var e="",n=0;n<t;n++)e+='<span class="wget-rating__item">&starf;</span>';return e},HTMLWgtAddMoreItemsBtn:function(){return P?'<button class="wgt-add-more-btn">Show more</button>':'<button class="wgt-add-more-btn hide">Show more</button>'},HTMLWgtOverlay:function(){return'<div class="wgt-overlay"></div>'},HTMLWgtQuestionPoint:function(t){return t.map(function(t){if("Any extra comments"!==t.text&&"rating"!==t.text&&""!==t.answer)return'\n\t\t\t\t\t\t<div class="wgt-point">\n\t\t\t\t\t\t\t<div class="wgt-point__text">'+t.text+'</div>\n\t\t\t\t\t\t\t<div class="wgt-point__label">'+t.answer+"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"}).join("")},HTMLWgtPopupTags:function(t){return t.tags?'\n\t\t\t\t<div class="wgt-tags">\n\t\t\t\t\t<div class="wgt-title">Tags</div>\n\t\t\t\t\t<div class="wgt-tags-wrapper">\n\t\t\t\t\t\t'+q.HTMLWgtTag(t.tags)+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>   \n\t\t\t\t":""},HTMLWgtTag:function(t){return t.map(function(t){return'<div class="wgt-tag">'+t+"</div>"}).join("")},HTMLWgtLocation:function(t){return t._geoloc?'\n\t\t\t\t\t<div class="wgt-location">\n\t\t\t\t\t\t<div class="wgt-title">Location</div>\n\t\t\t\t\t\t<div class="wgt-map"></div>\n\t\t\t\t\t</div>\n\t\t\t\t':""},HTMLWgtPopup:function(t){var e=W[t],n=e.content,i=e.linkeeProfile,a=e.linkerProfile,o=i.firstName+" "+i.lastName,r=a.firstName+" "+a.lastName,s=q.setAnswer(n),l=q.setRating(n);return'\n\t\t\t\t\t<div class="wgt-modal">\n\t\t\t\t\t\t<div class="wgt-item-header">\n\t\t\t\t\t\t\t<img src="'+n.coverPic+'" alt="" class="wgt-item-header__img">\n\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t<img src="'+i.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+o+'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="wgt-item-header__descr">'+n.title+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="wgt-article">\n\t\t\t\t\t\t\t<div class="wgt-article-header">\n\t\t\t\t\t\t\t\t<div class="wgt-item-footer__rating">\n\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__avatar-wrap">\n\t\t\t\t\t\t\t\t\t\t<img src="'+a.profilePic+'" alt="" class="wgt-item__avatar">\n\t\t\t\t\t\t\t\t\t\t<div class="wget-rating-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t<div class="wgt-item-header__name">'+r+'</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="wget-rating">\n\t\t\t\t\t\t\t\t\t\t\t\t'+q.HTMLWgtStars(l)+'\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t\t<div class="wgt-article-text">\n\t\t\t\t\t\t\t\t<div class="wgt-article__descr">\n\t\t\t\t\t\t\t\t\t'+s+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t\t\t"+q.HTMLWgtQuestionPoint(n.questions)+"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t"+q.HTMLWgtLocation(n)+"          \n\t\t\t\t\t\t\t"+q.HTMLWgtPopupTags(n)+"          \n\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t"},HTMLWgtCloseModal:function(){return'\n\t\t\t\t\t<button class="wgt-close-modal">\n\t\t\t\t\t\t<span class="wgt-close-modal__text">Back</span>\n\t\t\t\t\t</button>\n\t\t\t\t'},setMsnryColumnWidth:function(t){return t<576?"wgt-item--one-in-row":t<768?"wgt-item--two-in-row":t<992?"wgt-item--three-in-row":"wgt-item--four-in-row"},setMsnryGutterWidth:function(t){return t<576?".wgt-item--one-in-row-gutter":t<768?".wgt-item--two-in-row-gutter":t<992?".wgt-item--three-in-row-gutter":".wgt-item--four-in-row-gutter"},setClassToWgtItems:function(t){for(var e=a.querySelectorAll(".wgt-item:not(.wgt-item--one-in-row):not(.wgt-item--two-in-row):not(.wgt-item--three-in-row):not(.wgt-item--four-in-row)"),n=0;n<e.length;n++)e[n].classList.add(t)},updateClassToWgtItems:function(t){for(var e=a.querySelectorAll(".wgt-item"),n=0;n<e.length;n++)e[n].className="wgt-item",e[n].classList.add(t)},initMasonry:function(){var t=q.setMsnryColumnWidth(h),e=q.setMsnryGutterWidth(h);q.setClassToWgtItems(t),C=new Masonry(T,{itemSelector:".wgt-item",columnWidth:"."+t,percentPosition:!0,gutter:e})},updateMasonry:function(){var t=q.setMsnryColumnWidth(h),e=q.setMsnryGutterWidth(h);q.updateClassToWgtItems(t),C.destroy(),C=new Masonry(T,{itemSelector:".wgt-item",columnWidth:"."+t,percentPosition:!0,gutter:e})},addSpinnerAfterWidgetTarget:function(t){var e=o.createElement("div");e.className="spinner",e.innerHTML+=q.HTMLWgtSpinner(),s.style.position="relative",s.style.minHeight="200px",s.appendChild(e),t()},addStyleToHead:function(t){q.appendTagToHead(q.createStyle(m.settings.pathToStyle,t))},addScriptToHead:function(t){q.appendTagToHead(q.createScript(m.settings.pathToMasonry,t))},addGoogleMapsScriptToHead:function(t){q.appendTagToHead(q.createScript(m.settings.pathToGoogleMap,t))},togglePopup:function(){_.classList.toggle("open"),M.classList.toggle("open"),L.classList.toggle("open"),i.classList.toggle("wgt-modal-open")},closePopup:function(){_.classList.remove("open"),M.classList.remove("open"),L.classList.remove("open"),i.classList.remove("wgt-modal-open")},onPopupBtnClick:function(){y.addEventListener("click",function(t){var e=t.target;if(e.classList.contains("wgt-btn-popup-open")){var n=e.closest(".wgt-item").getAttribute("data-id");q.handleLayoutPopupLayout(n),q.togglePopup()}})},onPopupCloseBtnClick:function(){y.addEventListener("click",function(t){var e=t.target;e.classList.contains("wgt-close-modal")&&q.closePopup(),e.closest(".wgt-close-modal")&&q.closePopup()})},onPopupOverlayClick:function(){M.addEventListener("click",function(){q.closePopup()})},onAddMoreItemsBtnClick:function(t){H.addEventListener("click",function(){q.getNewItemsData(t,p,w)})},onWindowresize:function(){e.addEventListener("resize",function(){h=s.offsetWidth,f||(q.updateMasonry(),f=!0,setTimeout(function(){f=!1},500))})},iosPolifilForScroll:function(){var n=o.querySelector(".wgt-popup"),i=null;n.addEventListener("touchstart",function(t){1===t.targetTouches.length&&(i=t.targetTouches[0].clientY)},!1),n.addEventListener("touchmove",function(t){1===t.targetTouches.length&&function(t){var e=t.targetTouches[0].clientY-i;0===n.scrollTop&&0<e&&t.preventDefault();n.scrollHeight-n.scrollTop<=n.clientHeight&&e<0&&t.preventDefault()}(t)},!1)},domReady:function(){q.addAsyncValToVariables(),q.initMasonry(),k.classList.add("hide"),q.onPopupBtnClick(),q.onPopupCloseBtnClick(),q.onPopupOverlayClick(),q.onAddMoreItemsBtnClick(function(){q.addItemsToLayout(S)}),q.onWindowresize(),q.iosPolifilForScroll()}};return q.addStyleToHead(function(){q.addSpinnerAfterWidgetTarget(function(){q.addScriptToHead(function(){q.addGoogleMapsScriptToHead(function(){q.getItemsData(function(){q.handleLayout(q.domReady)},p,w)})})})}),q}(window,document)});